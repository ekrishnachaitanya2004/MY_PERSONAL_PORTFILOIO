{
  "version": 3,
  "sources": ["../../@swup/body-class-plugin/src/classes.ts", "../../@swup/body-class-plugin/src/attributes.ts", "../../@swup/body-class-plugin/src/index.ts"],
  "sourcesContent": ["export function updateClassNames(el: HTMLElement, newEl: HTMLElement, { prefix = '' } = {}): void {\n\tconst remove = [...el.classList].filter((className) => isValid(className, { prefix }));\n\tconst add = [...newEl.classList].filter((className) => isValid(className, { prefix }));\n\tel.classList.remove(...remove);\n\tel.classList.add(...add);\n}\n\nfunction isValid(className: string, { prefix = '' } = {}): boolean {\n\treturn !!className && className.startsWith(prefix);\n}\n", "export function updateAttributes(\n\ttarget: Element,\n\tsource: Element,\n\tfilters: (string | RegExp)[] = []\n): void {\n\tconst keep = new Set<string>();\n\n\tfor (const { name, value } of getAttributes(source, filters)) {\n\t\ttarget.setAttribute(name, value);\n\t\tkeep.add(name);\n\t}\n\n\tfor (const { name } of getAttributes(target, filters)) {\n\t\tif (!keep.has(name)) {\n\t\t\ttarget.removeAttribute(name);\n\t\t}\n\t}\n}\n\nfunction getAttributes(el: Element, filters: (string | RegExp)[] = []): Attr[] {\n\tconst all = Array.from(el.attributes);\n\tif (!filters.length) return all;\n\n\treturn all.filter(({ name }) =>\n\t\tfilters.some((pattern) =>\n\t\t\tpattern instanceof RegExp ? pattern.test(name) : name === pattern\n\t\t)\n\t);\n}\n", "import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\nimport { updateClassNames } from './classes.js';\nimport { updateAttributes } from './attributes.js';\n\ntype Options = {\n\t/** If set, only classes beginning with this string will be added/removed. */\n\tprefix: string;\n\t/** Additional body attributes to update, besides the classname. */\n\tattributes: (string | RegExp)[];\n};\n\nexport default class SwupBodyClassPlugin extends Plugin {\n\tname = 'SwupBodyClassPlugin';\n\n\trequires = { swup: '>=4.6' };\n\n\tdefaults: Options = {\n\t\tprefix: '',\n\t\tattributes: []\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.update);\n\t}\n\n\tprotected update: Handler<'content:replace'> = (visit) => {\n\t\tconst { prefix, attributes } = this.options;\n\t\tupdateClassNames(document.body, visit.to.document!.body, { prefix });\n\t\tif (attributes?.length) {\n\t\t\tupdateAttributes(document.body, visit.to.document!.body, attributes);\n\t\t}\n\t};\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AAOA,SAASA,EAAQC,GAAAA,EAAmBC,QAAEA,KAAS,GAAA,IAAO,CAAA,GAAA;AACrD,SAAA,CAAA,CAASD,KAAaA,EAAUE,WAAWD,EAAAA;AAC5C;ACUA,SAASE,EAAcC,GAAaC,KAA+B,CAAA,GAAA;AAClE,QAAMC,KAAMC,MAAMC,KAAKJ,EAAGK,UAAAA;AAC1B,SAAKJ,GAAQK,SAENJ,GAAIK,OAAO,CAAA,EAAGC,MAAAA,GAAAA,MACpBP,GAAQQ,KAAMC,CAAAA,OACbA,cAAmBC,SAASD,GAAQE,KAAKJ,EAAAA,IAAQA,OAASE,EAAAA,CAAAA,IAJhCR;AAO7B;AChBqB,IAAAW,IAAA,cAA4BC,EAAAA;EAWhDC,YAAYC,IAA4B,CAAA,GAAA;AACvCC,UAAAA,GAAQC,KAXTV,OAAO,uBAAqBU,KAE5BC,WAAW,EAAEC,MAAM,QAAA,GAAA,KAEnBC,WAAoB,EACnBxB,QAAQ,IACRQ,YAAY,CAAA,EAAA,GACZa,KACDF,UAAAA,QAAOE,KAWGI,SAAsCC,CAAAA,OAAAA;AAC/C,YAAA,EAAM1B,QAAEA,IAAMQ,YAAEA,GAAAA,IAAea,KAAKF;AAAAA,QFjCtB,SAAiBhB,IAAiBwB,IAAAA,EAAoB3B,QAAEA,KAAS,GAAA,IAAO,CAAE,GAAA;AACzF,cAAM4B,KAAS,CAAA,GAAIzB,GAAG0B,SAAAA,EAAWnB,OAAQX,CAAAA,OAAcD,EAAQC,IAAW,EAAEC,QAAAA,GAAAA,CAAAA,CAAAA,GACtE8B,IAAM,CAAA,GAAIH,GAAME,SAAAA,EAAWnB,OAAQX,CAAAA,OAAcD,EAAQC,IAAW,EAAEC,QAAAA,GAAAA,CAAAA,CAAAA;AAC5EG,QAAAA,GAAG0B,UAAUD,OAAAA,GAAUA,EAAAA,GACvBzB,GAAG0B,UAAUC,IAAAA,GAAOA,CAAAA;MACrB,GE6BmBC,SAASC,MAAMN,GAAMO,GAAGF,SAAUC,MAAM,EAAEhC,QAAAA,GAAAA,CAAAA,GACvDQ,QAAAA,MAAAA,GAAYC,WDnCF,SACfyB,IACAC,IACA/B,KAA+B,CAAA,GAAA;AAE/B,cAAMgC,KAAO,oBAAIC;AAEjB,mBAAK,EAAM1B,MAAEA,GAAI2B,OAAEA,EAAAA,KAAWpC,EAAciC,IAAQ/B,EAAAA,EACnD8B,CAAAA,GAAOK,aAAa5B,GAAM2B,CAAAA,GAC1BF,GAAKN,IAAInB,CAAAA;AAGV,mBAAK,EAAMA,MAAEA,GAAAA,KAAUT,EAAcgC,IAAQ9B,EAAAA,EACvCgC,CAAAA,GAAKI,IAAI7B,EAAAA,KACbuB,GAAOO,gBAAgB9B,EAAAA;MAG1B,GCmBoBoB,SAASC,MAAMN,GAAMO,GAAGF,SAAUC,MAAMxB,EAAAA;IAC1D,GAZAa,KAAKF,UAAOuB,GAAA,CAAA,GAAQrB,KAAKG,UAAaL,CAAAA;EACvC;EAEAwB,QAAAA;AACCtB,SAAKuB,GAAG,mBAAmBvB,KAAKI,MAAAA;EACjC;AAAA;",
  "names": ["isValid", "className", "prefix", "startsWith", "getAttributes", "el", "filters", "all", "Array", "from", "attributes", "length", "filter", "name", "some", "pattern", "RegExp", "test", "SwupBodyClassPlugin", "Plugin", "constructor", "options", "super", "this", "requires", "swup", "defaults", "update", "visit", "newEl", "remove", "classList", "add", "document", "body", "to", "target", "source", "keep", "Set", "value", "setAttribute", "has", "removeAttribute", "_extends", "mount", "on"]
}
